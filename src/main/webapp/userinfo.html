<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>卡游宝--用户信息</title>
    <style>
        @font-face {
            font-family: custom;       /*这里是说明调用来的字体名字*/
            src: url('./css/first.TTF');   /*这里是字体文件路径*/
        }

        html {
            height: 100%;
            width: 100%;
            background: #393F4F;
        }

        .box {
            width: 100%;
            height: auto !important;
            min-height: 600px;
            height: 600px;
            background: #fff;
            margin: auto;
            padding-top: 46px;
        / / 设置据顶部高度
        }

        .user {
            background-color: #393F4F;
            height: 110px;
            padding-top: 10px;
        }

        /* WebKit browsers */

        ::-webkit-input-placeholder {
            color: white;
        }

        /* Mozilla Firefox 4 to 18 */

        :-moz-placeholder {
            color: white;
            opacity: 1;
        }

        /* Mozilla Firefox 19+ */

        ::-moz-placeholder {
            color: white;
            opacity: 1;
        }

        /* Internet Explorer 10+ */

        :-ms-input-placeholder {
            color: white;
        }

        .panel {
            margin: 10px;
            margin-top: 20px;
        }

        .box_163css {
            width: 100%;
            background-color: #393F4F;
        }

        .nav {
            width: 100%;
            float: left;
            height: 34px;
        }

        .nav li {
            font-size: 14px;
            float: left;
            width: 50%;
            height: 34px;
            -webkit-transition: all 0.35s linear;
            cursor: pointer;
            text-align: center;
            line-height: 32px;
            list-style-type: none;
            color: white;
        }

        .nav li.on {
            color: #4EB7CD;
        }

        .line {
            width: 100%;
            float: left;
            position: relative;
            left: 0;
            top: 0px;
            height: 2px;
            background: #5A6378;
        }

        .s_line {
            position: absolute;
            display: block;
            width: 50%;
            z-index: 1;
            top: -7px;
            left: 0;
            height: 7px;
            border-bottom: 2px solid #4EB7CD;
            overflow: hidden;
            text-align: center;
        }

        .s_line b {
            display: inline-block;
            margin-top: -8px;
            width: 0;
            height: 0;
            border-style: dashed dashed solid;
            border-width: 10px;
            border-color: transparent transparent #E4393C;
            overflow: hidden;
            zoom: 1;
            font-size: 0;
        }

        .zlbox_content {
            width: 100%;
            margin: 0px auto;
            margin-top: 20px;
        }

        .item_tab {
            min-height: 100%;
            border-top: 0px;
            text-align: center;
        }

        .list_item {
            border-bottom: 1px solid gray;
        }
    </style>
</head>

<body>
<div class="box">
    <div class="header" style="position:fixed;left:0px;top:0px;width:100%;z-index: 5; height: 50px; background-color: #5A6378">
        <table width="100% " height="50px" border="0" cellpadding="0 " cellspacing="0 ">
            <tr>
                <td width="40% " align="left " style="padding: 5px;">
                    <img src="./img/back.png " width="15px " height="20px" style="margin-left: 10px;" onclick="back()"></img>
                </td>
                <td width="60% " align="right" style="padding-right: 10px; ">
                    <img src="./img/img_logo.png " width="120px " height="35px"
                         style="margin-right: 20px; margin-top: 10px"></img>
                </td>
            </tr>
        </table>
    </div>

    <div class="user">
        <table width="100% " border="0" cellpadding=" " cellspacing="0 ">
            <tr>
                <td width="30% " align="center" style="padding: 5px; color: #5DABB8;">用户:</img>
                </td>
                <td width="70% " align="left" style="padding-right: 10px; "><span
                        style="color: #5DABB8; margin-left: 0px;" id="username"></span></td>
            </tr>
            <tr>
                <td width="30% " align="center" style="padding: 5px;color: #5DABB8; ">账户积分:</img>
                </td>
                <td width="70% " align="left" style="padding-right: 10px; "><span style="color: #5DABB8; " id="token"></span></td>
            </tr>
            <tr>
                <td width="30% " align="center" style="padding: 5px;color: #5DABB8; ">参与活动数量:</img>
                </td>
                <td width="70% " align="left" style="padding-right: 10px; "><span style="color: #5DABB8; " id="joinCount"></span></td>
            </tr>
        </table>

        <div class="box_163css">
            <ul class="nav">
                <li class="navs_li on">抽奖房间</li>
                <li class="navs_li">开奖房间</li>
            </ul>

            <div class="line">
	    	<span class="s_line">
				<b></b>
	    	</span>
                <div style="clear: both;"></div>
            </div>
            <div style="clear: both;"></div>
        </div>
    </div>

    <div class="">

    </div>


    <div class="zlbox_content">
        <!-- 抽奖房间-->
        <div class="item_tab" style="display: block;">
            <div class="list" id="luckRoom" style="margin-top: 40px">
                <!-- <a href="#">
                     <table width="100% " height="90px " border="0" cellpadding=" " cellspacing="0 " class="list_item">
                         <tr>
                             <td colspan="2" width="100% " align="left" style="padding-left: 15px; color: #FF6B6B;font-family: custom">房间名称</img>
                             </td>
                         </tr>
                         <tr>
                             <td width="50% " align="left" style="padding-left: 15px;color: gray; ">房间价值:50/100</img>
                             </td>
                             <td width="50% " align="right" style="padding-right: 10px "></td>
                         </tr>
                         <tr>
                             <td width="50% " align="left" style="padding-left: 15px;color: gray ">房间剩余时间:18:00</img>
                             </td>
                             <td width="50% " align="left" style=""><span style="color: #5DABB8; " id="time"></span></td>
                         </tr>
                         <tr>
                             <td width="50% " align="left" style="padding-left: 15px;color: gray ">房间参与人数:18:00</img>
                             </td>
                             <td width="50% " align="left" style=""><span style="color: #5DABB8; " id="num"></span></td>
                         </tr>
                     </table>
                 </a>-->

            </div>
        </div>

        <!-- 开奖房间 -->
        <div class="item_tab" style="display: none;">
            <div class="list" id="kjRoom" style="margin-top: 20px">

            </div>
        </div>
    </div>

</div>

</div>

<script type="text/javascript ">
    $(document).ready(function () {
        getLuckRomm();
    });

    function back() {
        window.history.go(-1);
    }

    function goto(activityId) {
        window.location.href = "roominfo.html?activityid=" + activityId;
    }

    function goto2(activityId) {
        window.location.href = "kjroominfo.html?activityid=" + activityId;
    }

    function getLuckRomm() {
        $.ajax({
            type: 'POST',
            url: "/user/showLuckRomm",
            success: function (data) {
                if (data.code == 200) {
                    dataStr = JSON.stringify(data.data);
                    var data = JSON.parse(dataStr);
                    console.log("data=" + data.username);
                    $("#username").html(data.username);
                    $("#token").html(data.token);
                    $("#joinCount").html(data.joinnum);
                    var str = "";
                    $.each(data.list, function (i, a) {
                        str +=
                            "<table width='100%' height='120px' border='0' cellspacing='0' class='list_item' onclick='goto(" + a.activityid + ")'>" +
                            "<tr>" +
                            "<td colspan='2' width='100%' align='left' style='padding-left: 15px; color: #FF6B6B;font-family: custom'>" + a.roomname + "</img>" +
                            "</td>" +
                            "</tr>" +
                            "<tr>" +
                            "<td width='70%'  align='left' style='padding-left: 15px;color: gray; '>" + "房间价值:" + a.price + "</img>" +
                            "</td>" +
                            "<tr>" +
                            "<td width='70%'  align='left' style='padding-left: 15px;color: gray; '>" + "房间剩" +
                            "余时间:" + a.time + "</img>" +
                            "</td>" +
                            "<td width='70%' align='right' style='padding-right: 10px'></td></tr>" +
                            "<tr><td width='50%' align='left' style='padding-left: 15px;color: gray'>" + "房间参与人数: " + a.joinnum + "</img> </td>" +
                            "<td width='30%' align='left'><span style='color: #5DABB8;' id='time'></span></td></tr></table>";
                    })
                    $("#luckRoom").html(str);
                    /*<button type='button' class='loadbtn' onclick='deleteItem(" + a.activityid + ")'>删除</button>*/
                }
                if (data.code == 201) {
                    alert(data.msg);
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
            }
        });
    }

    function getKj() {
        $.ajax({
            type: 'POST',
            url: "/activity/kjroom/joinedList",
            success: function (data) {
                if (data.code == 200) {
                    dataStr = JSON.stringify(data.data);
                    var dataMap = JSON.parse(dataStr);
                    console.log("data=" + data.username);
                    $("#username").html(dataMap.name);
                    $("#token").html(dataMap.token);
                    $("#joinCount").html(dataMap.count);
                    var str = "";
                    $.each(dataMap.kjroomInfo, function (i, a) {
                        if (a.flag == -1) {
                            str += "<a href='#' class='list-group-item' onclick='goto2(" + a.id + ")'>" +
                                "<p class='list-group-item-text'>" +
                                "房间名称: <span>" + a.activityname + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "房间价值: <span>" + a.allprice + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "房间剩余时间: <span>" + "活动已经结束" + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "房间参与人数: <span>" + a.num + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "庄家Id: <span>" + a.name + "</span>" +
                                "</p>" +
                                "</a>";
                        } else {
                            str += "<a href='#' class='list-group-item' onclick='goto2(" + a.id + ")'>" +
                                "<p class='list-group-item-text'>" +
                                "房间名称: <span>" + a.activityname + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "房间价值: <span>" + a.allprice + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "房间结束时间: <span>" + a.endBlock + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "房间参与人数: <span>" + a.num + "/" + a.limitmax + "</span>" +
                                "</p>" +
                                "<p class='list-group-item-text'>" +
                                "庄家Id: <span>" + a.name + "</span>" +
                                "</p>" +
                                "</a>";
                        }

                    })
                    $("#kjRoom").html(str);
                }
                if (data.code == 201) {
                    alert(data.msg);
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
            }
        });
    }


    var l = 0;
    $('.navs_li').hover(function () {
        $(this).siblings().removeClass('on');
        $(this).addClass('on');
        var i = $(this).index();
        var width = document.body.clientWidth;
        var a1 = width / 2 * i;
        $(".s_line").animate({left: a1}, 200);
        var index = $(".navs_li").index($(this));
        $(".item_tab").hide();
        $(".item_tab").eq(index).show();
        console.log("i=" + i);
        if (index == 0) {
        } else if (index == 1) {
            getKj();
        }
    });


</script>
</body>

</html>